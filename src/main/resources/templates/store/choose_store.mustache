<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">
    <style>
        #customHeaderColor {
            background-color: #2AC1BC !important;
        }
        h1, h2, h3, header, nav{
            font-family: 'Do Hyeon', sans-serif;
        }

    </style>
</head>
<body>
    <header class="navbar navbar-dark sticky-top bg-info flex-md-nowrap p-3 shadow" id="customHeaderColor">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 text-dark" id="customATag" href="/owner/store/main">민족의 배달 사장님 광장</a>
        <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-nav">
            <div class="nav-item text-nowrap" id="login-logout-section">

            </div>
        </div>
    </header>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 mt-5">
        <div>
            <h2 class="h2">관리 가게 선택</h2>
        </div>
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <div class="row row-cols-1 row-cols-md-3 g-4">
                {{#storeList}}
                    <div class="col">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="card-title">{{storeName}}</h5>
                            </div>
                            <div class="card-body">
                                <p class="card-text">
                                    <ul>
                                        <li>{{storeTel}}</li>
                                        <li>{{storeCategory}}</li>
                                        <li>{{storeBasicAddr}}</li>
                                        <li>{{storeDetailAddr}}</li>
                                    </ul>
                                </p>
                            </div>
                            <div class="card-footer">
                                <button class="btn btn-primary" id="startManage" btn-attribute-manage="{{storeIdx}}">관리하기</button>
                            </div>
                        </div>
                    </div>
                {{/storeList}}

                <div class="col">
                    <div class="card h-100">
                        <img src="/staticImg/5SY.png" class="card-img-top" alt="..." style="width: 25%; margin: auto auto;">
                        <div class="card-footer">
                            <button class="btn btn-primary" onclick="location.href='/owner/createStore/{{ownerIdx}}'">새로운 가게 등록 하기</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>
{{>store/common/store_footer}}

<script>

    let btns = document.querySelectorAll('#startManage');
    btns.forEach( btn => {
        btn.addEventListener("click", (event) => {
            const manageBtn = event.target;
            const storeIdxVal = manageBtn.getAttribute("btn-attribute-manage");

            if(window.sessionStorage.getItem('storeIdx')){
                window.sessionStorage.removeItem('storeIdx');
            };
            window.sessionStorage.setItem('storeIdx', storeIdxVal);

            location.href = `/owner/manageStore/${storeIdxVal}`;
        });
    });

</script>